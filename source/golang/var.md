---
title: 变量
---

## 声明变量

在 Go 语言中，用 `var` 关键字声明一组变量。和函数参数列表类似，类型放在变量名之后。比如：

```go
var c, python, java bool
```

## 声明并初始化变量

用 `var` 声明变量时，可以带有初始值。比如：

```go
var i, j int = 1, 2
```

如果初始值存在，则可以省略类型，变量会使用初始值的类型。比如：

```go
var c, python, java = true, false, "no!"
```

## 短变量声明

在函数内部，可以用操作符 `:=` 来替代 `var` 声明一个具有隐式类型的变量。比如：

```go
func penta(v int) int {
	factor := 5
	return factor * v
}
```

在函数外部，因为每一个语句必须以关键字开头，所以还是老老实实用 `var` 吧。

可以使用操作符 `:=` 同时定义几个变量。比如：

```go
a, b := 1, 2
```

操作符 `:=` 左边不一定都是新变量，只要至少有一个新变量即可。比如下例，变量 `c` 最终的值是 9：

```go
b, c := 2, 3
c, d := 9, 10
```

## 常量

声明常量就像是声明变量那样，不过要用 `const` 关键字，而不是用 `var`。比如：

```go
const a int64 = 1
```

像变量那样，可以在一行内定义多个常量：

```go
const b, c = 2, 3
```

如果同时要定义好几个常量，单行些比较长的话，还可以用下面的带括号的常量声明语法来定义多个常量：

```go
const (
	d = 4
	e = 5
)
```

不可以使用 `:=` 语法来声明常量。

目前，只有以下几种常量：布尔、`rune`、整数、浮点数、复数和字符串。不支持创建自定义类型的常量。

常量声明中的表达式可以省略（除了第一行之外），被省略的表达式实际是重复上一行的表达式。比如：

```go
const (
	a = 1 // 第一行不可省略
	b     // 这一行省略了常量表达式，重复上一行，所以 b 的值也是 1
	c     // 这一行省略了常量表达式，重复上一行，上一行也省略了，往上找到第一行，所以 c 的值也是 1
)
```

## `iota`

在常量声明中，可以使用预定义的标识符 `iota` 来表示连续的无类型整数常量。比如：

```go
const a = iota // a 的值是 0
const b = iota // b 的值也是 0
```

上面的例子里，`a` 和 `b` 的值都是 0。有啥意思呢？确实没啥意思，`iota` 要用带括号的常量声明语法才能显示出威力。比如下例：

```go
const (
	Sunday = iota // 0
	Monday        // 1
	Tuesday       // 2
	Wednesday     // 3
	Thursday      // 4
	Friday        // 5
	Partyday      // 6
	numberOfDays  // 7
)
```

这个例子中，`Sunday` 以下的常量表达式都使用 `iota`，但是他们的值不同。因为 `iota` 的取值是[括号中常量出现的行数](https://golang.org/ref/spec#Iota)（从 0 开始，注释行不算），所以 `Sunday` 是第“0”个，所以其值为 0，`Monday` 是第“1”个，所以其值为 1，依次往后推。

再比如：

```go
const (
	a, b = iota, iota * 3  // a == 0, b == 0 (iota == 0)
	// some comments       // 注释行忽略
	c, _                   // c == 1         (iota == 1)
	// 注意，这里必须写成 “c, _”，而不是单独一个 “c”
	d, e                   // d == 2, e == 6 (iota == 2)
)
```

还可以对 `iota` 做运算。比如：

```go
const (
	a = iota     // a == 0  (iota == 0)
	_            // 忽略     (iota == 1)
	c            // c == 2  (iota == 2)
	d = iota * 3 // d == 9  (iota == 3)
	e            // e == 12 (iota == 4)
)
```