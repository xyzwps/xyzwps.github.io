---
layout: ../../../layouts/MdxLayout.astro
title: 数据类型
parent:
  name: 返回上级
  path: /cheatsheet/java
---

使用合适的数据类型进行计算是编程语言中的核心问题之一。

Java 支持的数据类型有两类：

- 基本数据类型
- 引用类型

## 基本数据类型

基本数据类型（primitive types） 只有以下几种：

- 数值类型
  - 整数：`byte`、`short`、`int`、`long`、`char`
  - 浮点数：`float`、`double`
- `boolean`

### `boolean`

布尔类型只有两个取值 `true` 和 `false`。

支持的操作有：

- 等值比较：`==`、`!=`
- 逻辑非：`!`
- 逻辑或 `|`、逻辑且 `&`、逻辑异或 `^`
- 条件与 `&&`、条件或 `||`
- 作为三元运算符 `? :` 的第一个表达式

布尔类型的值或者表达式多用于[条件控制语句](/cheatsheet/java/control-flow)。

### 整数

#### 整数的取值范围

| 类型     | 位宽 | 有无符号 | 取值范围 |
|---------|-----|---------|---------|
| `byte`  | 8   | 有 | -128（$-2^7$） ~ 127（$2^{7}-1$）|
| `short` | 16  | 有 |-32768（$-2^{15}$） ~ 32767（$2^{15}-1$）|
| `int`   | 32  | 有 |-2147483648（$-2^{31}$） ~ 2147483647（$2^{31}-1$）|
| `long`  | 64  | 有 |-9223372036854775808（$-2^{63}$） ~ 9223372036854775807（$2^{63}-1$）|
| `char`  | 16  | 无 | `'\u0000'`（0） ~ `'\uffff'`（65535） |

#### 整数字面量

整数有以下几种表示方式：

- 十进制。如：`123`、`-123`
- 十六进制，以 `0x` 或者 `0X` 开头。如：`0x7B`、`-0X7b`
- 八进制，以 `0` 开头。如：`0173`、`-0173`
- 二进制，以 `0b` 或者 `0B` 开头。如：`0b1111011`、`-0B1111011`

默认情况下，整数字面量的类型是 `int`。如果字面的值超出 `int` 的取值范围，可以在后面加
`l` 或者 `L` 来创建 `long` 类型的字面量（当然地，`long` 类型字面量也不应超出其取值范围）。
如：`2147483648L`。

对于过长的数字，可以使用下划线对其进行分段，使人类读起来更容易。比如：`123_456_789`、`0x1_2345_6789`。

`char` 类型的字面量，都用单引号圈起来。比如：`'a'`、`'X'`、`'晴'`。
对于一些可能引起歧义的字符，或者一些不寻常的字符，用转义字符表示。转义字符就是以 `\` 开头的字符。
比如：`'\''`、`'\"'`、`'\\'`、`'\a'`、`'\b'`、`'\s'`、`'\t'`、`'\n'`、`'\f'`、`'\r'` 等等。
此外，所有字符都可以用 unicode 字码转义字符表示，比如：`'\u0027'`。


#### 整数支持的操作

所有数值类型都支持以下操作：

- 比较大小：`<`、`<=`、`>=`、`>`
- 比较是否相等：`==`、`!=`

这两类比较操作的结果都是布尔值。

```java
class ComparasionOperations {
  public static void main(String[] args) {
    System.out.println(1 > 2);
    System.out.println(2 >= 2);
    System.out.println('a' <= 'A');
    System.out.println(2 == 2);
    System.out.println(2 != 2);
  }
}
```

`int` 和 `long` 还支持以下特定操作：

- 一元操作符：`+`、`-`
- 加减乘除：`+`、`-`、`*`、`/`
- 求余数：`%`
- 递增递减：`++`、`--`（前缀式和后缀式）
- 位操作：`&`（按位与）、`|`（按位或）、`^`（按位异或）
- 位移：`<<`（向左移动）、`>>`（向右移动）、`>>>`（无符号向右移动）
- 按位求补：`~`（`~x` 等价于 `(-x)-1`）

**注意**：
- 对两个整数使用 `/` 做除法得到的结果是整数。比如 `10 / 4` 得到的结果是 2，而不是 2.5。
- 递增递减这两个操作符主要用在对整数变量的操作上。比如：
  ```java
  int i = 1;
  System.out.println(i++); // 输出 1
  System.out.println(++i); // 输出 3
  ```
  之所以产生这样的输出结果，是因为前缀式和后缀式计算顺序有区别。
  对于 `i++`，因为 `i` 在前面，所以先取 `i` 的值之后，再对其递增；
  对于 `++i`，因为 `++` 在前面，所以先对 `i` 递增后，再取其值。

  对 `--` 同理。

### 浮点数

浮点数只有两种 `float` 和 `double`。

浮点数字面量都带有小数点，比如：`3.14`。浮点数字面量的值默认是 `double` 类型的，如果你愿意，可以在结尾标记上 `d` 或者 `D`。
`float` 类型的字面量应以 `f` 或者 `F` 结尾。

浮点数支持科学计数法。比如：`2.1e7` 表示 $2.1 \times 10^7$，`2.1E-7` 表示 $2.1 \times 10^{-7}$。

支持 16 进制浮点数字面量。少用，这里不再介绍，具体参见 Java 语言规范。

### 类型转化

基本数据类型值之间的转换有两种：隐式转换和显式转换。

隐式转换遵循的规则是，低精度类型值可以隐式转换成高精度类型的值。

```
byte → short
            ↘
              int → long → float → double
            ↗
        char
```

如上图，箭头左边的值可以隐式转换成右边的类型。右边的转成左边类型时，需要显式转换。下面是一个显式转换的例子：

```java
int a = (int)12.3;
```

## 引用类型

除了基本数据类型之外的所有类型都是引用类型。所有的引用类型值都叫对象，它们都是 `java.lang.Object`。
与此相关的概念有：`class`、`interface`、`enum`、`record` 等等。后面会一一介绍。

## 参考

- [Java 语言规范第三章：词法结构](https://docs.oracle.com/javase/specs/jls/se23/html/jls-3.html#jls-3.10.1)
- [Java 语言规范第四章：类型、值与变量](https://docs.oracle.com/javase/specs/jls/se23/html/jls-4.html#jls-4.2)
