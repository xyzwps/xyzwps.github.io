<!DOCTYPE html><html lang="zh-CN"> <head><link rel="canonical" href="/blogs/2025-06-12-streaming-rendering"><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><title>æµå¼æ¸²æŸ“</title><script>
  var _hmt = _hmt || [];
  (function () {
    var hm = document.createElement("script");
    hm.src = "https://hm.baidu.com/hm.js?e5cd13f29c2fc3a6a3ca36ad30480374";
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(hm, s);
  })();
</script><link href="https://cdn.bootcdn.net/ajax/libs/KaTeX/0.16.4/katex.min.css" rel="stylesheet"><link rel="stylesheet" href="/_astro/2024-08-27-dg-to-di.DzoS-3go.css">
<style>*{line-height:1.8}h2,h3,h4,h5,h6{color:#1f2937}blockquote{color:#4b5563;border-left-color:#6366f1}table{border:1px solid #ced4da;border-collapse:collapse}table tr{border-top:1px solid #ced4da}table tr td,table tr th{border-left:1px solid #ced4da;padding:8px 16px}img{width:100%;border:1px solid #eef;border-radius:4px}.math{max-width:100%;overflow-y:auto}.katex{font-size:1rem}.astro-code{padding:16px;border-radius:6px}
</style></head> <body class="pb-6 bg-indigo-50"> <div class="container mx-auto px-4 py-2 flex"> <a href="/" class="rounded-full bg-white py-2 px-6 select-none"><span class="font-bold">@xyzwps</span></a> </div> <div class="container mx-auto pt-4 px-4 sm:px-6 lg:px-8"> <nav class="flex" aria-label="Breadcrumb"> <ol class="inline-flex items-center space-x-1 md:space-x-3"> <li class="inline-flex items-center"> <a href="/" class="inline-flex items-center text-sm font-medium text-indigo-600 hover:text-indigo-800 transition-colors duration-200"> <svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"> <path d="M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"></path> </svg>
ä¸»é¡µ
</a> </li> <li> <div class="flex items-center"> <svg class="w-6 h-6 text-indigo-400" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"> <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path> </svg> <a href="/blogs" class="ml-1 text-sm font-medium text-indigo-600 hover:text-indigo-800 transition-colors duration-200 md:ml-2"> æ–‡ç« åˆ—è¡¨ </a> </div> </li> </ol> </nav> </div> <div class="container mx-auto p-4 min-h-screen"> <div class="grid grid-cols-4 gap-4"> <div class="prose prose-slate prose-code:before:content-[''] prose-code:after:content-[''] prose-img:p-4 prose-img:shadow bg-white max-w-none col-span-3 max-lg:col-span-4 border border-indigo-50 rounded-lg p-6 shadow text-gray-900"> <h1 class="text-gray-900">æµå¼æ¸²æŸ“</h1> <div class="text-sm text-gray-500">2025-06-12</div>   <h2 id="èƒŒæ™¯">èƒŒæ™¯</h2>
<p>äº‹æƒ…æ˜¯è¿™æ ·çš„ï¼šæˆ‘æœ‰ä¸€ä¸ªéœ€æ±‚ï¼Œæ˜¯ä½¿ç”¨ AI ä¸ºå®¢æˆ·åˆ¶å®šæ—…è¡Œè®¡åˆ’ã€‚</p>
<p>è¿™ä¸ªåŠŸèƒ½çš„è¾“å…¥æ˜¯ç”¨æˆ·çš„ä¸€æ®µè¯ã€‚æ¯”å¦‚ï¼š</p>
<blockquote>
<p>æˆ‘æœ‰7å¤©æ—¶é—´ï¼Œæƒ³ä»å±±ä¸œå¾·å·å»åŒ—äº¬æ—…è¡Œã€‚è¯·å¸®æˆ‘å®‰æ’ä¸€ä¸ªå‡ºè¡Œè®¡åˆ’</p>
</blockquote>
<p>è¾“å‡ºæ˜¯ä¸€ä¸ªæœ‰æ¼‚äº®æ ¼å¼çš„åˆ—è¡¨ã€‚å°±åƒä¸‹é¢è¿™æ ·ï¼š</p>
<style>astro-island,astro-slot,astro-static-slot{display:contents}</style><script>(()=>{var e=async t=>{await(await t())()};(self.Astro||(self.Astro={})).only=e;window.dispatchEvent(new Event("astro:only"));})();</script><script>(()=>{var A=Object.defineProperty;var g=(i,o,a)=>o in i?A(i,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):i[o]=a;var d=(i,o,a)=>g(i,typeof o!="symbol"?o+"":o,a);{let i={0:t=>m(t),1:t=>a(t),2:t=>new RegExp(t),3:t=>new Date(t),4:t=>new Map(a(t)),5:t=>new Set(a(t)),6:t=>BigInt(t),7:t=>new URL(t),8:t=>new Uint8Array(t),9:t=>new Uint16Array(t),10:t=>new Uint32Array(t),11:t=>1/0*t},o=t=>{let[l,e]=t;return l in i?i[l](e):void 0},a=t=>t.map(o),m=t=>typeof t!="object"||t===null?t:Object.fromEntries(Object.entries(t).map(([l,e])=>[l,o(e)]));class y extends HTMLElement{constructor(){super(...arguments);d(this,"Component");d(this,"hydrator");d(this,"hydrate",async()=>{var b;if(!this.hydrator||!this.isConnected)return;let e=(b=this.parentElement)==null?void 0:b.closest("astro-island[ssr]");if(e){e.addEventListener("astro:hydrate",this.hydrate,{once:!0});return}let c=this.querySelectorAll("astro-slot"),n={},h=this.querySelectorAll("template[data-astro-template]");for(let r of h){let s=r.closest(this.tagName);s!=null&&s.isSameNode(this)&&(n[r.getAttribute("data-astro-template")||"default"]=r.innerHTML,r.remove())}for(let r of c){let s=r.closest(this.tagName);s!=null&&s.isSameNode(this)&&(n[r.getAttribute("name")||"default"]=r.innerHTML)}let p;try{p=this.hasAttribute("props")?m(JSON.parse(this.getAttribute("props"))):{}}catch(r){let s=this.getAttribute("component-url")||"<unknown>",v=this.getAttribute("component-export");throw v&&(s+=` (export ${v})`),console.error(`[hydrate] Error parsing props for component ${s}`,this.getAttribute("props"),r),r}let u;await this.hydrator(this)(this.Component,p,n,{client:this.getAttribute("client")}),this.removeAttribute("ssr"),this.dispatchEvent(new CustomEvent("astro:hydrate"))});d(this,"unmount",()=>{this.isConnected||this.dispatchEvent(new CustomEvent("astro:unmount"))})}disconnectedCallback(){document.removeEventListener("astro:after-swap",this.unmount),document.addEventListener("astro:after-swap",this.unmount,{once:!0})}connectedCallback(){if(!this.hasAttribute("await-children")||document.readyState==="interactive"||document.readyState==="complete")this.childrenConnectedCallback();else{let e=()=>{document.removeEventListener("DOMContentLoaded",e),c.disconnect(),this.childrenConnectedCallback()},c=new MutationObserver(()=>{var n;((n=this.lastChild)==null?void 0:n.nodeType)===Node.COMMENT_NODE&&this.lastChild.nodeValue==="astro:end"&&(this.lastChild.remove(),e())});c.observe(this,{childList:!0}),document.addEventListener("DOMContentLoaded",e)}}async childrenConnectedCallback(){let e=this.getAttribute("before-hydration-url");e&&await import(e),this.start()}async start(){let e=JSON.parse(this.getAttribute("opts")),c=this.getAttribute("client");if(Astro[c]===void 0){window.addEventListener(`astro:${c}`,()=>this.start(),{once:!0});return}try{await Astro[c](async()=>{let n=this.getAttribute("renderer-url"),[h,{default:p}]=await Promise.all([import(this.getAttribute("component-url")),n?import(n):()=>()=>{}]),u=this.getAttribute("component-export")||"default";if(!u.includes("."))this.Component=h[u];else{this.Component=h;for(let f of u.split("."))this.Component=this.Component[f]}return this.hydrator=p,this.hydrate},e,this)}catch(n){console.error(`[astro-island] Error hydrating ${this.getAttribute("component-url")}`,n)}}attributeChangedCallback(){this.hydrate()}}d(y,"observedAttributes",["props"]),customElements.get("astro-island")||customElements.define("astro-island",y)}})();</script><astro-island uid="r0EpB" component-url="/_astro/ExamplePlan.BCd0N7R9.js" component-export="default" renderer-url="/_astro/client.Fq_1qYMf.js" props="{}" ssr client="only" opts="{&quot;name&quot;:&quot;ExamplePlan&quot;,&quot;value&quot;:true}"></astro-island>
<p>ä¼ ç»Ÿçš„æ–¹å¼æ˜¯ï¼Œè¾“å‡ºä¸€ä¸ª JSONï¼Œç„¶åæŠŠæ•´ä¸ª JSON ç”¨ç»„ä»¶æ¸²æŸ“å‡ºæ¥ã€‚
å¦‚æœ AI æ€è€ƒè¿‡ç¨‹è¾ƒé•¿ï¼Œç”¨æˆ·å¯èƒ½è¦å¯¹ç€å±å¹•ä¸Šçš„æ—‹è½¬èŠèŠ±ç›¸å½“é•¿çš„æ—¶é—´ï¼Œä½“éªŒä¸å¤Ÿå¥½ã€‚
æœ€å¥½èƒ½åšæˆæµå¼çš„ï¼Œä¸€è¾¹è¾“å‡ºï¼Œä¸€è¾¹æ¸²æŸ“ã€‚</p>
<p>å¦‚æœæˆ‘ä»¬ç”¨æµå¼è¾“å‡ºçš„è¯ï¼Œåœ¨æŠŠæ‰€æœ‰ token è¾“å‡ºç»™å‰ç«¯ä¹‹å‰ï¼Œå‰ç«¯ç”¨å¾—åˆ°çš„ token join å‡ºæ¥çš„ JSON
æ˜¯ä¸é—­åˆçš„ï¼Œæˆ–è€…è¯´ä¸åˆæ³•çš„ã€‚å‰ç«¯è§£æè¿™ç§ç¼ºå±è‚¡çš„ä¸åˆæ³• JSON ååˆ†éº»çƒ¦ã€‚</p>
<p>è¿™æ—¶éœ€è¦ä¸€ç§è¾“å‡ºä¸€éƒ¨åˆ†å°±å¯ä»¥è§£æçš„æ•°æ®æ ¼å¼ã€‚æˆ‘ä»¬æŠŠç›®å…‰æŠ•é™äº† YAMLã€‚</p>
<h2 id="yaml">YAML</h2>
<p>å¦‚æœæµå¼è¾“å‡º YAML çš„è¯ï¼Œä¹Ÿä¼šå­˜åœ¨æ— æ³•è§£æçš„é—®é¢˜ã€‚
ä½†æ˜¯å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œè¾“å‡ºçš„ YAML æ˜¯å¯ä»¥è§£æçš„ã€‚ä¸ä¼šå‡ºç° JSON é‚£ç§ä¸æ¥å—å…¨éƒ¨ token å°±å®Œå…¨æ— æ³•è§£æçš„æƒ…å†µã€‚
å‰ç«¯æ¥å—åˆ° token ä¹‹åï¼ŒæŠŠå®ƒä»¬ join æˆ YAML å­—ç¬¦ä¸²ï¼Œå¹¶å¯¹æ­¤å­—ç¬¦ä¸²è¿›è¡Œè§£æã€‚</p>
<ul>
<li>å¦‚æœè§£ææˆåŠŸï¼Œå°±ç«‹åˆ»æ¸²æŸ“</li>
<li>å¦‚æœè§£æå¤±è´¥ï¼Œå°±ç­‰å¾…ä¸‹ä¸€ä¸ª tokenï¼Œæ¥äº†ä¹‹åå†å°è¯•è§£æã€‚ç­‰å¾…çš„è¿™æ®µæ—¶é—´å†…ï¼Œæˆ‘ä»¬æ¸²æŸ“ä¹‹å‰æˆåŠŸè§£æçš„éƒ¨åˆ†</li>
</ul>
<p>è¿™æ ·å°±å¥½äº†ã€‚æˆ‘ä»¬å¼€å¹²ã€‚</p>
<h2 id="æµå¼æ¸²æŸ“æ—…è¡Œè®¡åˆ’">æµå¼æ¸²æŸ“æ—…è¡Œè®¡åˆ’</h2>
<p>å…·ä½“è¿‡ç¨‹å·²ç»è¯´æ¸…æ¥šäº†ï¼Œç‚¹å‡»ä¸‹é¢çš„æŒ‰é’®è§‚çœ‹æ¼”ç¤ºæ•ˆæœå§ï¼š</p>
<astro-island uid="Z2fhQ7u" component-url="/_astro/StreamingPlan.BbG7mKzB.js" component-export="default" renderer-url="/_astro/client.Fq_1qYMf.js" props="{}" ssr client="only" opts="{&quot;name&quot;:&quot;StreamingPlan&quot;,&quot;value&quot;:true}"></astro-island>
<p>å¯ä»¥çœ‹åˆ°ï¼Œæ¼”ç¤ºæ•ˆæœè¿˜ä¸é”™ã€‚</p>
<h2 id="å­˜åœ¨çš„é—®é¢˜">å­˜åœ¨çš„é—®é¢˜</h2>
<p>ä¸è¿‡ï¼Œè¿™ç§æ–¹æ¡ˆä¾ç„¶å­˜åœ¨ä¸€äº›éš¾æçš„é—®é¢˜ï¼š</p>
<ol>
<li>ç°åœ¨çš„å¤§æ¨¡å‹éƒ½é’ˆå¯¹è¾“å‡º JSON çš„åœºæ™¯åšè¿‡ä¼˜åŒ–ï¼Œä½†æ˜¯æ²¡æœ‰å¯¹è¾“å‡º YAML çš„åœºæ™¯åšä¼˜åŒ–ã€‚
è¾“å‡º YAML æ—¶ï¼Œå¯èƒ½ä¼šå‡ºç°æ ¼å¼é”™è¯¯ã€‚
è¾“å‡ºæœ‰åµŒå¥—å±‚çº§çš„ YAML å’Œå¸¦æœ‰æ•°ç»„çš„ YAML æ—¶ï¼Œå‡ºç°æ ¼å¼é”™è¯¯çš„æ¦‚ç‡ä¼šæ›´é«˜ã€‚</li>
<li>YAML æ ‡å‡†å¤æ‚ï¼Œè§£æ YAML éœ€è¦å¼•å…¥ä¸€ä¸ªä½“ç§¯è¾ƒå¤§çš„åº“ã€‚
å¦‚æœä½ åœ¨å¾®ä¿¡å°ç¨‹åºè¿™ç§é™åˆ¶åº”ç”¨åŒ…ä½“å¤§å°çš„ç¯å¢ƒä¸­å·¥ä½œï¼Œè¦æ…é‡è€ƒè™‘é¡¹ç›®ä½“ç§¯çš„é—®é¢˜ã€‚
<blockquote>
<p>ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œè§£æ YAML çš„åº“æ˜¯æˆ‘æ‰‹æ“çš„ï¼Œå¯¹äºæœ¬ç¤ºä¾‹æ¥è¯´ï¼Œå¤Ÿç”¨äº† ğŸ˜‚</p>
</blockquote>
</li>
<li>YAML è¾“å‡ºä¸€åŠæ—¶ï¼Œæœ‰å¯èƒ½å‡ºç°è¿™ç§æƒ…å†µï¼šèƒ½å¤Ÿè§£ææˆåŠŸï¼Œä½†æ˜¯æ ¼å¼ä¸ç¬¦åˆè¦æ±‚ã€‚æ¯”å¦‚:
<pre class="astro-code one-dark-pro" style="background-color:#282c34;color:#abb2bf;overflow-x:auto" tabindex="0" data-language="yaml"><code><span class="line"><span style="color:#ABB2BF">- </span><span style="color:#98C379">name</span></span></code></pre>
ä¼šè¢«è§£ææˆä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„ã€‚æ–° token åŠ å…¥åï¼Œyaml å¯èƒ½å˜æˆè¿™æ ·:
<pre class="astro-code one-dark-pro" style="background-color:#282c34;color:#abb2bf;overflow-x:auto" tabindex="0" data-language="yaml"><code><span class="line"><span style="color:#ABB2BF">- </span><span style="color:#E06C75">name</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">åˆ»æ™´</span></span></code></pre>
è¿™æ¬¡åˆå˜æˆäº†å¯¹è±¡æ•°ç»„ã€‚å¯¹äºè¿™ç§æƒ…å†µï¼Œè¦æƒ³åŠæ³•å¤„ç†ã€‚</li>
</ol>  </div> <div class="max-lg:hidden border border-indigo-50 rounded-lg p-6 bg-white shadow"> <div class="sticky top-4">   <h1 class="mt-4 text-indigo-700 font-bold">æœ¬æ–‡ç›®å½•</h1> <ol class="ml-3 mt-4 list-disc pl-4 text-indigo-700"> <li class="font-bold text-sm"> <a class="cursor-pointer text-indigo-700 hover:text-indigo-900 hover:bg-indigo-100" href="#èƒŒæ™¯">èƒŒæ™¯</a> </li><li class="font-bold text-sm"> <a class="cursor-pointer text-indigo-700 hover:text-indigo-900 hover:bg-indigo-100" href="#yaml">YAML</a> </li><li class="font-bold text-sm"> <a class="cursor-pointer text-indigo-700 hover:text-indigo-900 hover:bg-indigo-100" href="#æµå¼æ¸²æŸ“æ—…è¡Œè®¡åˆ’">æµå¼æ¸²æŸ“æ—…è¡Œè®¡åˆ’</a> </li><li class="font-bold text-sm"> <a class="cursor-pointer text-indigo-700 hover:text-indigo-900 hover:bg-indigo-100" href="#å­˜åœ¨çš„é—®é¢˜">å­˜åœ¨çš„é—®é¢˜</a> </li> </ol>  </div> </div> </div> </div> </body></html>