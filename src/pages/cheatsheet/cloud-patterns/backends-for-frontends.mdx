---
layout: ../../../layouts/MdxLayout.astro
title: Backends for Frontends pattern
parent:
  name: 返回上级
  path: /cheatsheet/cloud-patterns/
translateFrom:
  url: https://learn.microsoft.com/en-us/azure/architecture/patterns/backends-for-frontends
  title: Backends for Frontends pattern - Azure Architecture Center
---

创建单独的后端服务以供特定的前端应用程序或接口使用。
你若希望避免为多个 UI 自定义单个后端时，此模式非常有用。此模式首先由 Sam Newman 描述。

## 问题上下文

应用程序可能最开始只针对桌面 web UI，这时只需要一个后端服务和前段交互就可以了。
随着应用用户群的增长，开发了移动应用程序，而它和桌面 web UI 共用同一个后端服务。
这个后端服务就成了通用后端，它同时满足桌面端和移动端的界面需求。

但是移动设备与桌面浏览器在很多方面都有很大不同，比如屏幕尺寸、性能和显示限制方面。
因此，对移动应用后端的要求不同于桌面 web UI。

这些差异导致移动端和桌面端对后端的需求产生了竞争关系。
后端需要定期进行重大更改以服务于桌面和移动应用。
通常，每个前端都有自己的开发团队，导致后端成为开发过程中的瓶颈。
相互冲突的更新需求，以及保持服务为两个前端工作的需要，可能会导致在单个可部署资源上花费大量精力。

## 解决方案

每个用户交互界面创建一个后端。微调每个后端的行为和性能，以最好地匹配前端环境的需求，而不必担心影响其他前端体验。

因为每个后端都特定于一个前段，所以可以针对该接口进行优化。
因此，它将更小，复杂度也更低，并且可能比试图满足所有前端要求的通用后端更快。
每个接口团队都有控制自己后端的自主权，不依赖于集中的后端开发团队。
这使得接口团队在语言选择、发布节奏、工作负载优先级和后端功能集成方面具有灵活性。

## 实现考量

- 考虑有多少个不同的后端要部署。
- 如果不同的前端会发出相同的请求，请考虑是否有必要为每个前端实现一个后端，单个后端是否就足够了。
- 实现此模式时，跨服务的代码重复很可能发生。
- 以前端为中心的后端服务应仅包含特定于客户端的逻辑和行为。一般业务逻辑和其他全局功能应在应用程序的其他地方进行管理。
- 考虑一下这种模式如何反映在开发团队的职责中。
- 考虑实现这种模式需要多长时间。当你继续支持现有的通用后端时，构建新后端的工作会产生技术债务吗？

## 何时使用

以下场景可使用：

- 通用后端在应付不同的前端逻辑时耗费了大量开发精力。
- 你希望为特定的客户端需求来优化后端。
- 对通用后端进行了自定义以适应多个前端。
- 编程语言更适合特定用户交互界面的后端，但不是所有用户界面。

此模式可能不适用的情况：

- 当前端向后端发出相同或相似的请求时。
- 当只使用一个前端与后端交互时。

## 参考

- [Sam Newman - Backends For Frontends](https://samnewman.io/patterns/architectural/bff/)